[Step-CA](https://smallstep.com/docs/step-ca) - —ç—Ç–æ —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º (Apache License 2.0) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ [ACME](https://datatracker.ietf.org/doc/html/rfc8555).

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (`step-ca` –¥–ª—è —Å–∞–º–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ `step-cli` –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã) —Å–∞–º —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω. –î–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è DNS-–∏–º–µ–Ω–∞, –∏–º—è —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–±—É–¥–µ—Ç —á–∞—Å—Ç—å—é —Å—É–±—ä–µ–∫—Ç–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏), —Ç–∏–ø —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ IP –∏ –ø–æ—Ä—Ç –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Å–ª—É–∂–±–æ–π [CA](https://en.wikipedia.org/wiki/Certificate_authority).

## –í–∞–∂–Ω–æ
–¢–∏–ø —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –∏–º—è —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–µ–ª—å–∑—è!
–ß—Ç–æ–±—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `step ca init ‚Ä¶‚Äã`. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ä–µ–¥—ã `STEPPATH` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ç–∞–∫, —á—Ç–æ–±—ã —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –∫–∞—Ç–∞–ª–æ–≥:
```
root@vasquez:~# export STEPPATH=/etc/step-ca
root@vasquez:~# step ca init --dns=pki.internal.ypbind.de --dns=pki.ypbind.de --address='[::]:8443'  --address=0.0.0.0:8443  --name="Certificate authority for internal.ypbind.de" --deployment-type=standalone --provisioner="root@internal.ypbind.de" --password-file=/etc/step/initial_pass

Generating root certificate... done!
Generating intermediate certificate... done!

‚úî Root certificate: /etc/step/certs/root_ca.crt
‚úî Root private key: /etc/step/secrets/root_ca_key
‚úî Root fingerprint: b7413e0c6a0572862fcc81feddefef3bdfe76fe03c56058571c4b7d859a2924f
‚úî Intermediate certificate: /etc/step/certs/intermediate_ca.crt
‚úî Intermediate private key: /etc/step/secrets/intermediate_ca_key
‚úî Database folder: /etc/step/db
‚úî Default configuration: /etc/step/config/defaults.json
‚úî Certificate Authority configuration: /etc/step/config/ca.json

Your PKI is ready to go. To generate certificates for individual services see 'step help ca'.

FEEDBACK üòç üçª
  The step utility is not instrumented for usage statistics. It does not phone
  home. But your feedback is extremely valuable. Any information you can provide
  regarding how you‚Äôre using `step` helps. Please send us a sentence or two,
  good or bad at feedback@smallstep.com or join GitHub Discussions
  https://github.com/smallstep/certificates/discussions and our Discord
  https://u.step.sm/discord.
```
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –æ—Ç–ø–µ—á–∞—Ç–æ–∫ root, –æ–Ω —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ï–≥–æ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `step-ca` —Å–ª—É–∂–±—ã.

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–¢–∏–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - [BoltDB](https://dbdb.io/db/boltdb). –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º BoltDB —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –¥–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –æ–¥–Ω–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ step-ca —Å–ª—É–∂–±–æ–π. –í –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –±—É–¥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è [CRL](https://en.wikipedia.org/wiki/Certificate_revocation_list), —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ [Prometheus](https://github.com/prometheus/prometheus), ‚Ä¶

–ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å. –ù–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ PostgreSQL –∏–ª–∏ MySQL/MariaDB. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–∞–∑–¥–µ–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `Step-CA` configuration.

–ü—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL, –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ step-ca - –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```
postgres@vasquez:~$ createuser --no-createdb --login --pwprompt --no-createrole --no-superuser --no-replication step-ca
Enter password for new role:
Enter it again:
```
–°–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `step_ca_db` –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∏ –Ω–∞–∑–Ω–∞—á—å—Ç–µ –µ–µ –Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
```
postgres@vasquez:~$ createdb --encoding=UTF-8 --owner=step-ca step_ca_db
```
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –≤—Å–µ –º–æ–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç UTF-8 –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏.

–í —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`${STEPPATH}/config/ca.json`) –∑–∞–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `db` —Å–ª–æ–≤–∞—Ä–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π PostgreSQL:
```
--- /etc/step-ca/config/ca.json.orig       2022-07-23 14:36:14.192091833 +0200
+++ /etc/step-ca/config/ca.json    2022-07-23 14:38:18.671617838 +0200
@@ -13,9 +13,9 @@
                "format": "text"
        },
        "db": {
-               "type": "badgerv2",
-               "dataSource": "/etc/step-ca/db",
-               "badgerFileLoadingMode": ""
+               "type": "postgresql",
+               "dataSource": "postgresql://step-ca:ItsSoFluffyImgonnaD1E@127.0.0.1:5432/",
+               "database": "step_ca_db"
        },
        "authority": {
                "provisioners": [
@@ -44,4 +44,4 @@
                "maxVersion": 1.3,
                "renegotiation": false
        }
-}
\ No newline at end of file
+}
```
# –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
–í–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —É–¥–æ–±–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª–∏–≤ –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `ca.json` –∏ + –≤–∫–ª—é—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ `enableAdmin` –∑–Ω–∞—á–µ–Ω–∏–µ `true` –≤ `authority` —Ä–∞–∑–¥–µ–ª–µ:
```
--- /etc/step-ca/config/ca.json.lprov     2022-07-23 15:00:09.130731156 +0200
+++ /etc/step-ca/config/ca.json    2022-07-23 15:00:39.816582101 +0200
@@ -18,22 +18,8 @@
                "database": "step_ca_db"
        },
        "authority": {
-               "provisioners": [
-                       {
-                               "type": "JWK",
-                               "name": "root@internal.ypbind.de",
-                               "key": {
-                                       "use": "sig",
-                                       "kty": "EC",
-                                       "kid": "...",
-                                       "crv": "P-256",
-                                       "alg": "ES256",
-                                       "x": "X..",
-                                       "y": "y..."
-                               },
-                               "encryptedKey": "..."
-                       }
-               ]
+               "enableAdmin": true,
+               "provisioners": []
        },
        "tls": {
                "cipherSuites": [
```
–≠—Ç–æ –¥–æ–±–∞–≤–∏—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ JWK `Admin JWK` –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `step` —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –≤–Ω–æ–≤—å —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞. –ü–∞—Ä–æ–ª—å `step` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–∞—Ä–æ–ª–µ–º –¥–ª—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ `step ca init` –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

# –í–∫–ª—é—á–∏—Ç—å ACME provisioner
–ü–æ—Å–∫–æ–ª—å–∫—É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ACME, ACME provisioner –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `provisioner` —Ä–∞–∑–¥–µ–ª —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–ª—É–∂–± –±—É–¥—É—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 90 –¥–Ω–µ–π (2160 —á–∞—Å–æ–≤), –∏ –µ—Å–ª–∏ CN –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω, –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –∏–º–µ–Ω–∏ —Å—É–±—ä–µ–∫—Ç–∞ (`forceCN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ `true` –∑–Ω–∞—á–µ–Ω–∏–µ).

```
--- /etc/step-ca/config/ca.json.no_acme     2022-08-14 09:57:08.869306887 +0200
+++ /etc/step-ca/config/ca.json 2022-08-14 09:59:41.768801437 +0200
@@ -19,7 +19,18 @@
        },
        "authority": {
                "enableAdmin": true,
-               "provisioners": [],
+               "provisioners": [
+                   {
+                       "type": "ACME",
+                       "name": "acme",
+                       "forceCN": true,
+                       "claims": {
+                           "minTLSCertDuration": "24h",
+                           "defaultTLSCertDuration": "2160h",
+                           "maxTLSCertDuration": "2160h"
+                       }
+                   }
+               ],
                "claims": {
                    "minTLSCertDuration": "5m",
                    "maxTLSCertDuration": "43830h",
```
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ—á–∫–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è CRL, URL OCSP –∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª–Ω–æ–º–æ—á–∏—è—Ö.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
 - –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –ø–æ–ª–Ω–æ–º–æ—á–∏—è—Ö - http://pki.internal.ypbind.de:8888/intermediate_ca.crt

 - –¢–æ—á–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è CRL - http://pki.internal.ypbind.de:8888/intermediate_ca.crl

 - URL-–∞–¥—Ä–µ—Å –æ—Ç–≤–µ—Ç—á–∏–∫–∞ OCSP - http://pki.internal.ypbind.de:8889/

–≠—Ç–æ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å, —Å–æ–∑–¥–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —à–∞–±–ª–æ–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞, `/etc/step-ca/templates/leaf_certificate.tpl` –æ–ø—Ä–µ–¥–µ–ª–∏–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:

```
{
{{- if .SANs }}
    "sans": {{ toJson .SANs }},
{{- end }}
{{- if typeIs "*rsa.PublicKey" .Insecure.CR.PublicKey }}
    "keyUsage": ["keyEncipherment", "digitalSignature"],
{{- else }}
    "keyUsage": ["digitalSignature"],
{{- end }}
    "extKeyUsage": ["serverAuth", "clientAuth"],
    "crlDistributionPoints": "http://pki.internal.ypbind.de:8888/intermediate_ca.crl"
    "issuingCertificateURL": "http://pki.internal.ypbind.de:8888/intermediate_ca.crt",
    "ocspServer": "http://pki.internal.ypbind.de:8889/",
}
```
–ï—Å–ª–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ ca.json —Ñ–∞–π–ª–µ, —Ñ–∞–π–ª —à–∞–±–ª–æ–Ω–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É (–∞–º).

–í–∞–∂–Ω–æ
–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
–ï—Å–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∫ –≤ —ç—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ, —Ñ–∞–π–ª —à–∞–±–ª–æ–Ω–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—Å–µ –≤–Ω–æ–≤—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã —Å –Ω–æ–≤—ã–º —à–∞–±–ª–æ–Ω–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞! –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç templateFile –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å –ø–æ–º–æ—â—å—é step ca provisioner add / step ca provisioner update –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, —Å–º. –†–∞–∑—Ä–µ—à–∏—Ç–µ step ca provisioner update —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä templateFile –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ #720
–ò–∑–º–µ–Ω–µ–Ω–∏—è, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç —Å–∞–π—Ç–∞
–í –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–ª–∞—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞–º–∏), –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª ACME. –ü–æ—Å–∫–æ–ª—å–∫—É —Å–µ—Ä–≤–µ—Ä—ã –æ–±—ã—á–Ω–æ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ —Ç—Ä–∏ –≥–æ–¥–∞, –∞ –ø–ª–∞—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ —Å–µ—Ç–∏, –¥–æ—Å—Ç—É–ø–Ω–æ–º —Ç–æ–ª—å–∫–æ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤ jump, –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –æ–∫–æ–ª–æ 3 –ª–µ—Ç.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–ü–ª–∞—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–•–æ—Ç—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–∏—Å—Ç–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç Redfish REST API, –Ω–µ –∫–∞–∂–¥—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –¥–ª—è –∑–∞–º–µ–Ω—ã SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–∞—Ä—É—à–µ–Ω–∏—é –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∏—Å—Ç–µ–º–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
–î–ª—è —ç—Ç–æ–≥–æ —Å–∞–π—Ç–∞ –≤—Å–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –±—É–¥—É—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –¥–Ω–µ–π –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 –¥–Ω—è, –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ª—É–∂–±—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Å–±–æ—è–º –≤ —Ä–∞–±–æ—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ REDIS publish / subscribe, –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞ MQTT –∏–ª–∏ HTTP –∏ —à—Ç–æ—Ä–º–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤, —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ (–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ) –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π subjectAltername x509.v3 –º–æ–≥—É—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã.

–≠—Ç–æ –º–æ–∂–Ω–æ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å, —Ä–∞—Å—à–∏—Ä–∏–≤ authority —Ä–∞–∑–¥–µ–ª —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ca.json:

--- /etc/step-ca/config/ca.json.unrstr     2022-07-24 10:53:07.580078893 +0200
+++ /etc/step-ca/config/ca.json 2022-07-24 11:09:54.808077262 +0200
@@ -19,7 +19,32 @@
        },
        "authority": {
                "enableAdmin": true,
-               "provisioners": []
+               "provisioners": [],
+               "claims": {
+                   "minTLSCertDuration": "5m",
+                   "maxTLSCertDuration": "26400h",
+                   "defaultTLSCertDuration": "720h"
+               },
+               "policy": {
+                   "x509": {
+                       "allow": {
+                           "dns": [
+                               "*.insecure",
+                               "*.internal.ypbind.de",
+                               "*.ypbind.de"
+                           ],
+                           "email": [
+                               "@internal.ypbind.de",
+                               "@ypbind.de"
+                           ],
+                           "ip": [
+                               "192.168.142.0/24",
+                               "10.147.239.0/24",
+                               "fd0a:93ef:ee26:cdbe:://64"
+                           ]
+                       }
+                   }
+               }
        },
        "tls": {
                "cipherSuites": [
–£—Å–∏–ª–µ–Ω–∏–µ
–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
–í—Å–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º —Ü–µ–Ω—Ç—Ä–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ. –ü–æ—Å–∫–æ–ª—å–∫—É –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–∑–∂–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏ –∏–ª–∏ –∑–∞–º–µ–Ω–µ –∫–ª—é—á–µ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –≤ –º–µ—Å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –ø—Ä–µ–∂–¥–µ —á–µ–º —É–¥–∞–ª—è—Ç—å –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã!

–ó–∞–∫—Ä—ã—Ç—ã–π SSL-–∫–ª—é—á –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ ${STEPPATH}/secrets/root_ca_key

–í–∞–∂–Ω–æ: –ù–ï —É–¥–∞–ª—è–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á! –í—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –≤–∞—à–µ–≥–æ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.

–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –µ—Å–ª–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
–ó–∞–∫—Ä—ã—Ç—ã–µ –∫–ª—é—á–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ø–∞—Ä–æ–ª—è.

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞—Ä–æ–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, –ø–∞—Ä–æ–ª—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ SSL-–∫–ª—é—á–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω.

–≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤step ca crypto change-pass:

root@vasquez:~# step crypto change-–ø–µ—Ä–µ–¥–∞—Ç—å /etc/step-ca/secrets/intermediate_ca_key
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ /etc/step-ca/secrets/intermediate_ca_key:
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è /etc/step-ca/secrets/intermediate_ca_key:
‚úî –•–æ—Ç–∏—Ç–µ –ª–∏ –≤—ã –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å /etc/step-ca/secrets/intermediate_ca_key [y / n]: y
–í–∞—à –∫–ª—é—á –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ /etc/step-ca/secrets/intermediate_ca_key.
–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –≤ —Ñ–∞–π–ª–µ, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω —Å–ª—É–∂–±–µ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ secrets/intermediate.pass –Ω–∏–∂–µ ${STEPPATH}

–í–∞–∂–Ω–æ! –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ —Å–ª—É–∂–±–µ –ø–∞—Ä–æ–ª—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–ø—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏! –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–¥–∞–∂–µ nobody) –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –ø–æ–¥–æ–±–Ω—ã–µ ps –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ - –∏ –ø–∞—Ä–æ–ª—è - –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –í–∞–∂–Ω–æ! –¢–∞–∫–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –¥–ª—è –ø–∞—Ä–æ–ª–µ–π, –æ–Ω–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ /proc/<pid>/env –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é xargs -0 < /proc/<pid>/env

–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ª—É–∂–±—ã –¥–ª—è —Å–ª—É–∂–±—ã CA
–í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∏–Ω—Ü–∏–ø–æ–º –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–ª—É–∂–±—É CA –∫–∞–∫ root. –ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ª—É–∂–±—ã –¥–ª—è —Å–ª—É–∂–±—ã CA, –Ω–∞–ø—Ä–∏–º–µ—Ä:

—à–∞–≥ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è 
—à–∞–≥: *:777:777: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ª—É–∂–±—ã Step-CA:/etc/step-ca:/sbin/nologin
–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å–æ–±–ª—é–¥–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∏ –ø—Ä–∞–≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö umask –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑—Ä–µ—à–∞—é—â–∏–º–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—Å–µ —Ñ–∞–π–ª—ã –∏ –∫–∞—Ç–∞–ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ª—É–∂–±—ã, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–∞–∑—ã–≤–∞–µ–º–æ–πstep, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å–ª—É–∂–±–µ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º.

–•–æ—Ä–æ—à–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

root@vasquez:~# find /etc/step-ca/ -ls 
 34 1 drwx------ 7 step step 7 –∏—é–ª—è 23:48 /etc/step-ca/
 11 1 drwx------ 2 —à–∞–≥ 4 23 –∏—é–ª—è 14:29 /etc/step-ca/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
 140 2 -rw------- 1 –ø–æ—à–∞–≥–æ–≤—ã–π —à–∞–≥ 818 23 –∏—é–ª—è 14:29 /etc/step-ca/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã/root_ca.crt
 134 2 -rw------- 1 step step 875 23 –∏—é–ª—è 14:29 /etc/step-ca/—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã/intermediate_ca.crt 
 17 1 drwx------ 2 —à–∞–≥ —à–∞–≥ 5 24 –∏—é–ª—è 11:09 /etc/step-ca/config 
 121 2 -rw------- 1 —à–∞–≥ —à–∞–≥ 1276 24 –∏—é–ª—è 11:09 /etc/step-ca/config/ca.json 
 158 1 -rw------- 1 –ø–æ—à–∞–≥–æ–≤—ã–π —à–∞–≥ 225 23 –∏—é–ª—è 15:50 /etc/step-ca/config/defaults.json 
 149 1 drwx------ 2 —à–∞–≥ 2 23 –∏—é–ª—è 14:29 /etc/step-ca/db
 14 1 drwx------ 2 —à–∞–≥ 5 24 –∏—é–ª—è 11:37 /etc/step-ca/—Å–µ–∫—Ä–µ—Ç—ã
 233 1 -rw------- 1 –ø–æ—à–∞–≥–æ–≤—ã–π —à–∞–≥ 70 24 –∏—é–ª—è 11:37 /etc/step-ca/—Å–µ–∫—Ä–µ—Ç—ã / –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å.–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ 
 137 1 -rw------- 1 –ø–æ—à–∞–≥–æ–≤—ã–π —à–∞–≥ 314 24 –∏—é–ª—è 11:34 /etc/step-ca/—Å–µ–∫—Ä–µ—Ç—ã/intermediate_ca_key
 20 1 drwx------ 2 —à–∞–≥ 2 23 –∏—é–ª—è 14:29 /etc/step-ca/—à–∞–±–ª–æ–Ω—ã
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –ù–µ –±–µ—Å–ø–æ–∫–æ–π—Ç–µ—Å—å –æ –¥–æ—Å—Ç—É–ø–µ –∫ –æ—Ç–∫—Ä—ã—Ç–æ–º—É –∫–ª—é—á—É –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –µ–≥–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ª–∏–±–æ –ø—É—Ç–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ step —Å—Ä–µ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ª–∏–±–æ –ø—É—Ç–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ https://<your_ca>:8443/roots.pem, –Ω–∞–ø—Ä–∏–º–µ—Ä, https://pki.internal.ypbind.de:8443/roots.pem –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ.

–ó–∞–ø—É—Å–∫ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–∞–∫ —Å–ª—É–∂–±—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
step-ca –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å, —Ä–∞–∑—Ä–µ—à–∞—é—â–∏–π —É–¥–∞–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ü–µ–Ω—Ç—Ä—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–•–æ—Ç—è –ø–∞–∫–µ—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –º–æ–¥—É–ª—è –¥–ª—è systemd, –µ–≥–æ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞—Ç—å.

–§–∞–π–ª –º–æ–¥—É–ª—è systemd —Å –∏–º–µ–Ω–µ–º step-ca.service –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

[–ú–æ–¥—É–ª—å]
–û–ø–∏—Å–∞–Ω–∏–µ= —Å–ª—É–∂–±–∞ step-ca
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è= https://smallstep.com/docs/step-ca
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è= https://smallstep.com/docs/step-ca/—Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏-—Å–µ—Ä–≤–µ—Ä-–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
–ü–æ—Å–ª–µ = network-online.target sssd.service
–•–æ—á–µ—Ç = —Å–µ—Ç—å-–æ–Ω–ª–∞–π–Ω.—Ü–µ–ª–µ–≤–æ–π sssd.service
StartLimitIntervalSec = 30
StartLimitBurst = 3

[–°–ª—É–∂–±–∞]
–¢–∏–ø = –ø—Ä–æ—Å—Ç–æ–π
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = —à–∞–≥
–ì—Ä—É–ø–ø–∞ = —à–∞–≥
Environment= –ü–û–®–ê–ì–û–í–´–ô –ü–£–¢–¨ =/etc/step-ca
WorkingDirectory=/etc/step-ca
ExecStart=/usr/bin/step-ca config/ca.json --—Å–µ–∫—Ä–µ—Ç—ã —Ñ–∞–π–ª–∞ –ø–∞—Ä–æ–ª–µ–π/intermediate.pass
ExecReload=/bin/kill --—Å–∏–≥–Ω–∞–ª HUP $MAINPID
–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ = –ø—Ä–∏ —Å–±–æ–µ
RestartSec = 5
–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è stopsec = 30
StartLimitInterval = 30
StartLimitBurst = 3

; –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏
AmbientCapabilities=CAP_NET_BIND_SERVICE
CapabilityBoundingSet=CAP_NET_BIND_SERVICE
SecureBits = keep-caps
–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π = –¥–∞

; –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞
; –≠—Ç–∞ –ø–µ—Å–æ—á–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å YubiKey PIV (—á–µ—Ä–µ–∑ pcscd HTTP API), –Ω–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ 
; —Å–ª–∏—à–∫–æ–º –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è HSM PKCS # 11.
;
; –ü–†–ò–ú–ï–ß–ê–ù–ò–ï: –ü—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—É—é —á–∞—Å—Ç—å —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ–ø–æ–ª–∞–¥–æ–∫.
ProtectSystem = –ø–æ–ª–Ω—ã–π.
ProtectHome = true
RestrictNamespaces = true
Restrict addressfamilies= AF_UNIX AF_INET AF_INET6
PrivateTmp = true
ProtectClock = true
ProtectControlGroups = true
ProtectKernelTunables = true
ProtectKernelLogs = true
ProtectKernelModules = true
LockPersonality = true
RestrictSUIDSGID = true
RemoveIPC = true
RestrictRealtime = true
PrivateDevices = true
SystemCallFilter=@system-service
SystemCallArchitectures = native
MemoryDenyWriteExecute = true
ReadWriteDirectories=/etc/step-ca/db

[–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å]
WantedBy= –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π.target
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ systemd (systemctl daemon-reload) —Å–ª—É–∂–±—É –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å (systemctl enable --now step-ca.service)

–†–∞–±–æ—Ç–∞ —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
–£—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - —ç—Ç–æ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏, –≥–¥–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–ü–æ—Å—Ç–∞–≤—â–∏–∫ JWK –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —É—Å–ª—É–≥ –º–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–ª—É–∂–±—ã, –≤—ã–ø–æ–ª–Ω–∏–≤:

[maus @vasquez: ~] $ —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ step
–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
‚úî –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ / —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, name@example.com): —à–∞–≥
‚úî –ü–æ—Å—Ç–∞–≤—â–∏–∫: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ provisioner:
–¢–ò–ü –°–£–ë–™–ï–ö–¢–ê PROVISIONER 
step Admin JWK (JWK) SUPER_ADMIN
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
–í —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏. –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (–ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ, –æ—Ç–∑—ã–≤, –ø—Ä–æ–¥–ª–µ–Ω–∏–µ, ...).

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –æ–ø—Ü–∏—é –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ --super, –Ω–∞–ø—Ä–∏–º–µ—Ä:

[maus@vasquez: ~]$ –¥–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ step ca -- super superadmin "Admin JWK"
–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
‚úî –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ / —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, name@example.com): —à–∞–≥
‚úî –ü–æ—Å—Ç–∞–≤—â–∏–∫: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
–¢–ò–ü –°–£–ë–™–ï–ö–¢–ê-–ü–†–û–í–ê–ô–î–ï–†–ê 
–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä superadmin JWK (JWK) SUPER_ADMIN
–£–¥–∞–ª–µ–Ω–∏–µ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–π –Ω–æ–≤–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é step –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–¥–∞–ª–µ–Ω–∞. –≠—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é step ca admin remove –∫–æ–º–∞–Ω–¥—ã:

[maus @vasquez: ~] $ step –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–¥–∞–ª–∏—Ç—å —à–∞–≥
–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
‚úî –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ / —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, name@example.com): superadmin
‚úî –ü–æ—Å—Ç–∞–≤—â–∏–∫: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
‚úî –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: —Ç–µ–º–∞: step, –ø—Ä–æ–≤–∞–π–¥–µ—Ä: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK), —Ç–∏–ø: SUPER_ADMIN
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ (–Ω–µ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞) JWT provisioner
–î–ª—è –æ–±—ã—á–Ω—ã—Ö –∑–∞–¥–∞—á –ø–æ—Å—Ç–∞–≤—â–∏–∫ JWT (–±–µ–∑ –ø—Ä–∞–≤ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞) –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–º —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

maus@vasquez:~$ step ca provisioner add new_admin --–≤–≤–µ–¥–∏—Ç–µ JWK --create
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞ provisioner? [–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –∏ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –µ–≥–æ]:
–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
‚úî –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ / —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, name@example.com): superadmin
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ —Å–æ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: ‚Üì ‚Üë ‚Üí ‚Üê
–ö–∞–∫–æ–π –∫–ª—é—á –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
 ‚ñ∏ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
 acme (ACME)
 maus (JWK) [kid: 1V-DdUBRAM4-cJnHU47P-tKGDR7wTgvAodzruKrj1Pk]
‚úî –ü–æ—Å—Ç–∞–≤—â–∏–∫: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:
–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `step ca admin

maus@vasquez: ~$ step ca provisioner —É–¥–∞–ª—è–µ—Ç new_admin
–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
‚úî –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ / —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, name@example.com): superadmin
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ —Å–æ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: ‚Üì ‚Üë ‚Üí ‚Üê
–ö–∞–∫–æ–π –∫–ª—é—á –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
 ‚ñ∏ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
 acme (ACME)
 maus (JWK) [kid: 1V-DdUBRAM4-cJnHU47P-tKGDR7wTgvAodzruKrj1Pk]
 new_admin (JWK) [kid: mLpg9HogT6u3TZUmgxlHjPS7iStJB5lC-k186mKg6k0]
‚úî –ü–æ—Å—Ç–∞–≤—â–∏–∫: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:
–°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
–°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤ step ca provisioner list –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–µ–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

–≠—Ç–æ –º–æ–∂–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é jq, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–º–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:

maus@vasquez: ~$ —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ step ca | jq -r '.[].name'
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK 
acme 
maus 
new_admin
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ provisioner –¥–ª—è ACME
–ü–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è —Å–ª—É–∂–± –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º, –∏ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ACME. –ß—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ACME, —Ç–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è ACME.

–≠—Ç–æ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Å–¥–µ–ª–∞—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤:

[maus@vasquez: ~]$ step ca provisioner –¥–æ–±–∞–≤–∏—Ç—å acme --–≤–≤–µ–¥–∏—Ç–µ ACME
–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
‚úî –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ / —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, name@example.com): superadmin
‚úî –ü–æ—Å—Ç–∞–≤—â–∏–∫: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:
–®–∞–≥–∏ –≤ —Å—Ä–µ–¥–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏
–í –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω–æ–π —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ª–∏—Ü–∞–º–∏. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—Å—è –Ω–æ–≤—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã, –¥—Ä—É–≥–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —É–π–¥—É—Ç –∏–ª–∏ –ø–µ—Ä–µ–π–¥—É—Ç –∫ –¥—Ä—É–≥–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º.

–í–∞–∂–Ω–æ
–ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏ Super admmin
–î–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥, –≤–∫–ª—é—á–∞—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç —Å–≤–æ–∏ –ø–∞—Ä–æ–ª–∏, - —ç—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏.

–¢–∏–ø JWK-—Ç–æ–∫–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞—Å —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç, –ø–æ—ç—Ç–æ–º—É –º—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ–º—Å—è –µ–≥–æ.

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —É—Å–ª—É–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π step ca provisionier add:

[maus@vasquez: ~]$ step ca provisioner –¥–æ–±–∞–≤–∏—Ç—å maus -–≤–≤–µ–¥–∏—Ç–µ JWK -—Å–æ–∑–¥–∞—Ç—å
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞ provisioner? [–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –∏ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –µ–≥–æ]:
–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
‚úî –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ / —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, name@example.com): superadmin
‚úî –ü–æ—Å—Ç–∞–≤—â–∏–∫: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:
–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã, –≤—ã–ø–æ–ª–Ω–∏–≤ step ca bootstrap, –Ω–∞–ø—Ä–∏–º–µ—Ä:

[maus@vasquez:~]$ step ca bootstrap--ca-url=https://pki.internal.ypbind.de:8443 --fingerprint=b7413e0c6a0572862fcc81feddefef3bdfe76fe03c56058571c4b7d859a2924f
–ö–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ /home/maus/.step/certs/root_ca.crt.
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ–º–æ—á–∏–π –±—ã–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ /home/maus/.step/config/defaults.json.
–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–ï—Å–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É—Ö–æ–¥–∏—Ç, –µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Ç–∞–∫–∂–µ —Å–ª–µ–¥—É–µ—Ç —É–¥–∞–ª–∏—Ç—å. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤ step ca provisioner remove <name>

–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (JWT)
–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å JWT provisionert, –µ–≥–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ä–æ–π –∫–ª—é—á–µ–≤–æ–π —Ñ—Ä–∞–∑—ã –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –Ω–æ–≤–æ–π –∫–ª—é—á–µ–≤–æ–π —Ñ—Ä–∞–∑–æ–π. –°–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á JWT:

maus@vasquez:~$ OLD_KEY=$(—Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ step ca | jq -r '.[] | select(.name == "provisionername").EncryptedKey')
–ß—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á, —Å—Ç–∞—Ä—ã–π –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω:

maus@vasquez:~$ NEW_KEY=$(echo $OLD_KEY | step crypto jwe decrypt | step crypto jwe encrypt -alg PBES2-HS256 + A128KW | —Ñ–æ—Ä–º–∞—Ç step crypto jose)
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:
–ù–∞–∫–æ–Ω–µ—Ü, –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–æ –≤–Ω–æ–≤—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞:

maus@vasquez: ~$ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ step ca forgetful_admin --private-key=<(echo -n "${NEW_KEY}")
–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã –¥–æ–ª–∂–Ω—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
‚úî –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ / —Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, name@example.com): superadmin
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ —Å–æ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: ‚Üì ‚Üë ‚Üí ‚Üê
–ö–∞–∫–æ–π –∫–ª—é—á –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
 ‚ñ∏ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
 acme (ACME)
 maus (JWK) [kid: 1V-DdUBRAM4-cJnHU47P-tKGDR7wTgvAodzruKrj1Pk]
 forgetful_admin (JWK) [kid: Yx5mwRnWOzzTe8HXUE3-qY1jTs0WqRST3zYO0iufFYY]
‚úî –ü–æ—Å—Ç–∞–≤—â–∏–∫: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞:
–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
–•–æ—Ç—è –≤ —Ç–µ–∫—Å—Ç–µ —Å–ø—Ä–∞–≤–∫–∏ —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä step crypto jwe encrypt —É–∫–∞–∑–∞–Ω -alg –∫–∞–∫ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, –µ—Å–ª–∏ —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω JWT —Å–æ–¥–µ—Ä–∂–∏—Ç —ç—Ç–æ alg –ø–æ–ª–µ, -alg –ø–æ–ª–µ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–∫–∞–∑–∞–Ω–æ –ø—Ä–∏ –≤–≤–æ–¥–µ –∫–ª—é—á–∞.
–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
–í–∞–∂–Ω–æ
–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ! –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–¥–∞–ª–µ–Ω –∏ —Å–æ–∑–¥–∞–Ω –∑–∞–Ω–æ–≤–æ.
–û–±—â–∏–µ –∑–∞–¥–∞—á–∏
–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≤—Ä—É—á–Ω—É—é
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ openssl
–•–æ—Ç—è –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å CSR —Å –ø–æ–º–æ—â—å—é openssl req ‚Ä¶‚Äã –∫–æ–º–∞–Ω–¥—ã, –¥–µ–ª–∞—Ç—å —ç—Ç–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–º–µ–Ω–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã –≤ CSR, —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –≥—Ä–æ–º–æ–∑–¥–∫–∏–π –∞—Ä—Ö–∏–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ CSR —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ openssl..

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ step client
step –ö–æ–º–∞–Ω–¥–∞ –∏–∑ step-cli pacakge –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è CSR –∏ –∑–∞–¥–∞–Ω–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –∏–º–µ–Ω–∏ —Å—É–±—ä–µ–∫—Ç–∞, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞—Ç—å CSR —Å —Ç—Ä–µ–º—è —Ä–∞–∑–Ω—ã–º–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ —Å—É–±—ä–µ–∫—Ç–æ–≤ DNS –∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º RSA –¥–ª–∏–Ω–æ–π 4096 –±–∏—Ç —Å —Ç–µ–º–æ–π '/ C = DE/ O= internal.ypbind.de/OU= –°–ª—É–∂–±–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ / CN= sulaco.internal.ypbind.de':

maus@vasquez:~$ step —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ --csr --san=sulaco.internal.ypbind.de --san= sulaco.–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ --san=sulaco.ypbind.de --kty=RSA --size=4096 '/C= DE/O=internal.ypbind.de/OU= –°–ª—É–∂–±–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤/CN= sulaco.internal.ypbind.de' sulaco.csr sulaco.key
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞:
–í–∞—à –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ sulaco.csr.
–í–∞—à –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ sulaco.key.
–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CSR - —Ñ–∞–π–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π openssl req:

maus@vasquez: ~$ –∑–∞–ø—Ä–æ—Å openssl –≤ sulaco.csr -–±–µ–∑ —Ç–µ–∫—Å—Ç–∞
–ó–∞–ø—Ä–æ—Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:
 –î–∞–Ω–Ω—ã–µ:
 –í–µ—Ä—Å–∏—è: 1 (0x0)
 –¢–µ–º–∞: CN = /C = DE/ O=internal.ypbind.de/ OU= –°–ª—É–∂–±–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ / CN= sulaco.internal.ypbind.de
 –¢–µ–º–∞: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç–∫—Ä—ã—Ç–æ–º –∫–ª—é—á–µ:
 –ê–ª–≥–æ—Ä–∏—Ç–º —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–ª—é—á–æ–º: RSAencryption
 –û—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á RSA: (4096 –±–∏—Ç)
 –ú–æ–¥—É–ª—å:
 00:b4:14:44:5a: fe: f0:3c: 54:67: e1: e4: c5: e6:65:
...
 b3:b9:01
 –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å: 65537 (0x10001)
 –ê—Ç—Ä–∏–±—É—Ç—ã:
 –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
 –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –∏–º—è —Å—É–±—ä–µ–∫—Ç–∞ X509v3:
 DNS:sulaco.internal.ypbind.de, DNS: sulaco.–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ, DNS:sulaco.ypbind.de
 –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–ø–∏—Å–∏: sha256WithRSAEncryption
 78:50:7c: a5:2f: 40:a5:5f: 0b: 2b: 41:81:97:9b: c2:85: b0:13:
...
 01:c0:72:98:83:3c: a3: c9
–°–æ–≤–µ—Ç
–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã --no-password --insecure
–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–º–µ–Ω–∏ –∏ –ø–∞—Ä–æ–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –º–æ–≥—É—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è —Ü–µ–Ω—Ç—Ä–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏ –µ–≥–æ –ø–∞—Ä–æ–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:

maus@vasquez:~$ step ca sign --not-after=26400h --provisioner=maus sulaco.csr sulaco.pem
‚úî –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: maus (JWK) [kid: 1V-DdUBRAM4-cJnHU47P-tKGDR7wTgvAodzruKrj1Pk]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —É—Å–ª—É–≥:
‚úî –¶–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: https://pki.internal.ypbind.de:8443
‚úî –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: sulaco.pem
–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Ç–æ–∫–µ–Ω–∞ JWT
–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ CSR –ø—É—Ç–µ–º —É–∫–∞–∑–∞–Ω–∏—è –∏–º–µ–Ω–∏ –∏ –ø–∞—Ä–æ–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –ø–∞—Ä–æ–ª—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ JWT.

–¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä:

maus@vasquez:~$ TOKEN=$(—Ç–æ–∫–µ–Ω step ca --provisioner=maus --san=ripley.internal.ypbind.de --san= ripley.badphish.ypbind.de '/C= DE/O=internal.ypbind.de/OU= –°–ª—É–∂–±–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ /CN= ripley.internal.ypbind.de')
‚úî –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: maus (JWK) [kid: 1V-DdUBRAM4-cJnHU47P-tKGDR7wTgvAodzruKrj1Pk]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞: 
maus@vasquez: ~$ echo $ {–¢–û–ö–ï–ù}
eyJhbGciOiJFUzI1NiIsImtpZCI6IjFWLU...
–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –µ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥–µ –ø–æ–¥–ø–∏—Å–∏, –∏—Å–ø–æ–ª—å–∑—É—è --token –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:

maus@vasquez:~$ step ca sign --not-after=26400h --token=${–¢–û–ö–ï–ù} ripley.csr ripley.pem
‚úî CA: https://pki.internal.ypbind.de:8443
‚úî –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: ripley.pem
–í–Ω–∏–º–∞–Ω–∏–µ
–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –î–û–õ–ñ–ù–ê —Å–æ–¥–µ—Ä–∂–∞—Ç—å –í–°–ï –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–º–µ–Ω–∞ —Å—É–±—ä–µ–∫—Ç–æ–≤ –∏ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–¥–∞–Ω–Ω—ã–º –∫–æ–º–∞–Ω–¥–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ CSR, –µ—Å–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–º–µ–Ω–∞ —Å—É–±—ä–µ–∫—Ç–æ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –Ω–µ–ø–æ–ª–Ω—ã –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã, —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:
maus@vasquez:~$ step ca sign --not-after=26400h --token=${TOKEN_WITH_SAN_INCOMPLEE} ripley.csr ripley.pem
‚úî –¶–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: https://pki.internal.ypbind.de:8443
–ó–∞–ø—Ä–æ—Å –±—ã–ª –∑–∞–ø—Ä–µ—â–µ–Ω —Ü–µ–Ω—Ç—Ä–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: –∑–∞–ø—Ä–æ—Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö DNS-–∏–º–µ–Ω - –ø–æ–ª—É—á–µ–Ω–æ [ripley.internal.ypbind.de ripley.badphish.ypbind.de], —Ç—Ä–µ–±—É–µ—Ç—Å—è [/C= DE/O=internal.ypbind.de/OU= –°–ª—É–∂–±–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ /CN=ripley.internal.ypbind.de].
–ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é STEPDEBUG = 1 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
–ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
–î–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Ç—Ä–µ–±—É—é—Ç—Å—è —á–∞—Å—Ç–Ω–∞—è –∏ –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω–∞—è —á–∞—Å—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –î–ª—è –∑–∞–º–µ–Ω—ã —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ - –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è --out –æ–ø—Ü–∏—è) - –¥–ª—è --force –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å step ca renew –æ–ø—Ü–∏—é.

root@vasquez:~# step ca –æ–±–Ω–æ–≤–∏—Ç—å --–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ /etc/dovecot/ssl/imap_imap.internal.ypbind.de.pem /etc/dovecot/ssl/imap_imap.internal.ypbind.de.key
–í–∞—à —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ /etc/dovecot/ssl/imap_imap.internal.ypbind.de.pem.
–î–ª—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç—ã—Ö –∫–ª—é—á–µ–π –ø–∞—Ä–æ–ª—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø!) –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ —Å –ø–æ–º–æ—â—å—é –æ–ø—Ü–∏–∏ --password-file.

–ó–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ —Å–ª—É–∂–±–µ Step-CA –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è.

–í–∞–∂–Ω–æ
–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å –∏—Å—Ç–µ–∫—à–∏–º —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è:
maus@vasquez:~$ step ca renew --force /etc/postfix/ssl/new_smtp_ypbind.de.pem /etc/postfix/ssl/new_smtp_ypbind.de.key 
–æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞: –≤ –∑–∞–ø—Ä–æ—Å–µ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏—Å—Ç–µ–∫ 2022-09-20 12:30:07 +0000 UTC
–ß—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ --expires-in –æ–ø—Ü–∏—é, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è .authority.claims.defaultTLSCertDuration –∏–∑ config/ca.json —Ñ–∞–π–ª–∞.

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
–ö–ª–∏–µ–Ω—Ç Step-CA –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∫ –¥–µ–º–æ–Ω –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –∏ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–µ–π, –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –¥–≤–µ —Ç—Ä–µ—Ç–∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –≠—Ç–æ–≥–æ –º–æ–∂–Ω–æ –¥–æ–±–∏—Ç—å—Å—è, –ø–µ—Ä–µ–¥–∞–≤ –æ–ø—Ü–∏—é --daemon. –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –±—ã–ª –æ–±–Ω–æ–≤–ª–µ–Ω, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ª–∏–±–æ —Ñ–∞–π–ª signal –∏ PID (--signal / --pid-file) –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ PID –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞, –ª–∏–±–æ –∫–æ–º–∞–Ω–¥—É, –∑–∞–¥–∞–Ω–Ω—É—é --exec –æ–ø—Ü–∏–µ–π, –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥—ã.

–û—Ç–∑—ã–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ª—É–∂–± –∏–ª–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ / —Å–∏—Å—Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –º–æ–≥—É—Ç –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–æ–∑–≤–∞–Ω—ã –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –∏—Ö –¥–µ–π—Å—Ç–≤–∏—è.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ –æ—Ç–∑—ã–≤–∞.

–ê–∫—Ç–∏–≤–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, –∏–∑–≤–ª–µ–∫–∞—è CRL-—Ñ–∞–π–ª –∏–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—è OCSP-–æ—Ç–≤–µ—Ç—á–∏–∫.

–ü–∞—Å—Å–∏–≤–Ω–æ–µ –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤. –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç Step CA –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–∞—Å—Å–∏–≤–Ω—ã–π –æ—Ç–∑—ã–≤.
–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–æ–∑–≤–∞–Ω—ã:
–µ–≥–æ —Å–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ openssl x509 -in <cert> -noout -text -serial) - step ca revoke serial_mumber

—ç—Ç–æ –ø–∞—Ä–∞ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ / –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–µ–π - step ca revoke --cert=/path/to/pulic.pem --key=/path/to/private.key

–°–æ–≤–µ—Ç
–•–æ—Ç—è –ø—Ä–∏—á–∏–Ω–∞ –æ—Ç–∑—ã–≤–∞ (--reason="Lore ipsum‚Ä¶‚Äã") –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞, –µ–µ –≤—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ –æ—Ç–∑—ã–≤–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
–í–∞–∂–Ω–æ
–ï—Å–ª–∏ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–≤–µ—Å—Ç–∏ –µ–≥–æ –∫–æ–¥–æ–≤—É—é —Ñ—Ä–∞–∑—É –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞.
–í–∞–∂–Ω–æ
–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–æ–∑–≤–∞–Ω—ã –ø–æ –∏—Ö —Å–µ—Ä–∏–π–Ω–æ–º—É –Ω–æ–º–µ—Ä—É, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ OIDC.
–û—Ç–∑—ã–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å –ø–æ–º–æ—â—å—é –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ—Ç–∑—ã–≤–∞—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:

maus@vasquez: ~$ openssl x509 -–≤ ssl /ripley.pem -nout -serial 
serial=7CCDFDB5E70F0993029A6110603B05F4 
maus@vasquez:~$ maus@vasquez: ~$ step ca revoke --reason="–°–ª—É–∂–±–∞ —É–¥–∞–ª–µ–Ω–∞ –∏ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è" 0x7CCDFDB5E70F0993029A6110603B05F4
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ —Å–æ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: ‚Üì ‚Üë ‚Üí ‚Üê
–ö–∞–∫–æ–π –∫–ª—é—á –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
 –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä JWK (JWK) [kid: mj4o6pbvivgPKyK2GGFVRTmoH3fJb6nTOBoTAoshvfU]
 acme (ACME)
 ‚ñ∏ maus (JWK) [kid: 1V-DdUBRAM4-cJnHU47P-tKGDR7wTgvAodzruKrj1Pk]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
‚úî –¶–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: https://pki.internal.ypbind.de:8443
–û—Ç–∑—ã–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–∞ JWT
–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ—Ç–∑—ã–≤ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø—É—Ç–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ –æ—Ç–∑—ã–≤–∞ JWT –∏ –æ—Ç–∑—ã–≤–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –ø—É—Ç–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–∞ JWT.

–¢–æ–∫–µ–Ω –æ—Ç–∑—ã–≤–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω —Å –ø–æ–º–æ—â—å—é --revoke –æ–ø—Ü–∏–∏ step ca token –∫–æ–º–∞–Ω–¥—ã.

maus@vasquez:~$ TOKEN=$(step ca token --issuer=maus --revoke 0x0B5A836AF402C27EBD7B4653EC422804)
‚úî –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: maus (JWK) [kid: 1V-DdUBRAM4-cJnHU47P-tKGDR7wTgvAodzruKrj1Pk]
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∫–ª—é—á–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞: 
maus@vasquez:~$ step ca –æ—Ç–∑—ã–≤–∞–µ—Ç --–ø—Ä–∏—á–∏–Ω–∞="–°–ª—É–∂–±–∞ HTTP –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä" --—Ç–æ–∫–µ–Ω=${TOKEN} 0x0B5A836AF402C27EBD7B4653EC422804
‚úî –¶–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: https://pki.internal.ypbind.de:8443
–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å —Å–µ—Ä–∏–π–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º 0x0B5A836AF402C27EBD7B4653EC422804 –æ—Ç–æ–∑–≤–∞–Ω.
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–¢–æ–∫–µ–Ω –æ—Ç–∑—ã–≤–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–∑—ã–≤–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ACME –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ACME. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ACME –¥–ª—è –≤—ã–¥–∞—á–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Step CA –ø—Ä–æ—Å—Ç—ã.

–î–æ–±–∞–≤—å—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ acme –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ —É–∫–∞–∂–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É ACME URL –ø–æ –∞–¥—Ä–µ—Å—É https://<step_ca_url>/acme/<name_of_the_acme_provisioner>/directory.

–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è https://github.com/acmesh-official/acme.sh (acme.sh) –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤ —ç—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ acme.sh --server https://pki.internal.ypbind.de:8443/acme/acme/directory ‚Ä¶‚Äã

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–±-—Å–µ—Ä–≤–∏—Å - rss.ypbind.de - —Å–æ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –¥–ª—è http-01 ACME challenge

–ü—Å–µ–≤–¥–æ–Ω–∏–º /.well-known/acme-challenge "/var/www/rss.ypbind.de/letsencrypt/.well-known/acme-challenge"
<–ö–∞—Ç–∞–ª–æ–≥ "/var/www/rss.ypbind.de/letsencrypt/.well-known">
 –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ—Ç
 –¢—Ä–µ–±–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –≤—Å–µ –±—ã–ª–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
</Directory>
–º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –≤—ã–ø–æ–ª–Ω–∏–≤:

root@vasquez: ~# acme.sh --–ø—Ä–æ–±–ª–µ–º–∞ --–¥–æ–º–µ–Ω rss.ypbind.de --—Å–µ—Ä–≤–µ—Ä https://pki.internal.ypbind.de:8443/acme/acme/directory --ca-bundle /etc/step-ca/certs/root_ca.crt --—Ñ–∞–π–ª –ø–æ–ª–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏ /etc/apache2/ssl/rss.ypbind.de.pem --—Ñ–∞–π–ª –∫–ª—é—á–∞ /etc/apache2/ssl/rss.ypbind.de.key --reloadcmd "–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ apache2" --webroot /var/www/rss.ypbind.de/letsencrypt/
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. 05:48:29 CET] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: https://pki.internal.ypbind.de:8443/acme/acme/directory
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. 05:48:29 CET] –ï–¥–∏–Ω—ã–π –¥–æ–º–µ–Ω = 'rss.ypbind.de '
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. 05:48:29 CET] –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. 05:48:29 CET] –ü–æ–ª—É—á–µ–Ω–∏–µ webroot –¥–ª—è –¥–æ–º–µ–Ω–∞ = 'rss.ypbind.de'
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. 05:48:29 CET] –ü—Ä–æ–≤–µ—Ä–∫–∞: rss.ypbind.de
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. 05:48:30 CET] –£—Å–ø–µ—Ö
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥., 05:48:30 CET] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –Ω–∞—á–∏–Ω–∞–π—Ç–µ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å.
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥., 05:48:30 CET] –î–∞–≤–∞–π—Ç–µ –∑–∞–≤–µ—Ä—à–∏–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞.
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. 05:48:30 CET] Le_OrderFinalize='https://pki.internal.ypbind.de:8443/acme/acme/order/498GyYsv9EnNHqnGnasARdx12WyG32d7/finalize'
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. 05:48:30 CET] –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.
[–ü–Ω, 12 –¥–µ–∫. 2022 –≥., 05:48:30 CET] Le_LinkCert='https://pki.internal.ypbind.de:8443/acme/acme/certificate/2cW0M6iT6HqS9eupGVAltFR1SAo0QZMu'
[–ü–Ω, 12 –¥–µ–∫. 2022 –≥., 05:48:30 CET] –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ.
-----–ù–ê–ß–ê–¢–¨ –í–´–î–ê–ß–£ –°–ï–†–¢–ò–§–ò–ö–ê–¢–ê-----
MIIDDDCCArGgAwIBAgIQPb74n+U + mNE3tDwKv2iRTjAKBggqhkjOPQQDAjB+MTUw
MwYDVQQKEyxDZXJ0aWZpY2F0ZSBhdXRob3JpdHkgZm9yIGludGVybmFsLnlwYmlu
ZC5kZTFFMEMGA1UEAxM8Q2VydGlmaWNhdGUgYXV0aG9yaXR5IGZvciBpbnRlcm5h
bC55cGJpbmQuZGUgSW50ZXJtZWRpYXRlIENBMB4XDTIyMTIxMjE2NDcyOVoXDTIz
MDExMTE2NDgyOVowGDEWMBQGA1UEAxMNcnNzLnlwYmluZC5kZTCCASIwDQYJKoZI 
hvcNAQEBBQADggEPADCCAQoCggEBALl7uZ5IZojjqBRMauGG/dYgo/q3a5XqxBwe
qlfaiVNSHYXhsM0K4KOwQIJrcQTdii5XmL/YHpV8UCeN7YIMGvYzrzII9lsiCEkd
y/NHvlN4rZ2Q4zgcFshW8rK436x2LS2yNlF8orIiU1FIYYmzWg+AK1nfnoPoOR6Z 
mw + 1GUBqFMD+ kJdxyHlM3KpGSPSfCfm3Sl0SSW5hv7KPxGS1cAwq6xM+ CY8T7VR7
AHLcuXaWAre7lglNhpvmLrKhdnHTQJfmIQdPPeNceISMFif+y2HAreTyTNKjywWe
Ysr4KNVZUao2a2PWq/y5lTNMr5ymEjfQSwdhI4a3A6Q0iBmdSp0CAwEAAaOBqzCB
qDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMC
MB0GA1UdDgQWBBQ9WzU+r0YkaPhntTzBz12U2GBw0DAfBgNVHSMEGDAWgBQ9wBiD
qsyN5DOnBYsfywAYVcEKvDAYBgNVHREEETAPgg1yc3MueXBiaW5kLmRlMB0GDCsG
AQQBgqRkxihAAQQNMAsCAQYEBGFjbWUEADAKBggqhkjOPQQDAgNJADBGAiEAyY5h
gUJa13wCHqONKUoXTSFHhEoxBdEirOM7adboBqYCIQDo3STBKU910lUQjMLHo8RR 
n/4AcTOQqbn1bsFSF6xgEg==
----–ö–û–ù–ï–ß–ù–´–ô –°–ï–†–¢–ò–§–ò–ö–ê–¢-----
[–ü–Ω, 12 –î–µ–∫. 2022, 05:48:30 –ø–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏] –í–∞—à —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ /etc/acme.sh/rss.ypbind.de/rss.ypbind.de.cer
[–ü–Ω, 12 –î–µ–∫. 2022, 05:48:30 –ø–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏] –í–∞—à –∫–ª—é—á —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ /etc/acme.sh/rss.ypbind.de/rss.ypbind.de.key
[–ü–Ω, 12 –î–µ–∫. 2022, 05:48:30 –ø–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏] –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ /etc/acme.sh/rss.ypbind.de/ca.cer
[–ü–Ω, 12 –î–µ–∫. 2022, 05:48:30 –ø–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏] –ò —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–ª–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏ –µ—Å—Ç—å: /etc/acme.sh/rss.ypbind.de/fullchain.cer
[–ü–Ω, 12 –î–µ–∫. 2022, 05:48:30 –ø–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–ª—é—á–∞ –≤: /etc/apache2/ ssl/ rss.ypbind.de.key
[–ü–Ω, 12 –î–µ–∫. 2022, 05:48:30 –ø–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏ –≤: /etc/ apache2/ ssl/ rss.ypbind.de.pem
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. –≤ 05:48:30 –ø–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏] –ó–∞–ø—É—Å—Ç–∏—Ç–µ reload cmd: service apache2 force-reload
[–ü–Ω. 12 –¥–µ–∫. 2022 –≥. –≤ 05:48:31 –ø–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–ú—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º --apache —Ñ–ª–∞–≥ –¥–ª—è acme.sh, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—É—Ç–∞–Ω–∏—Ü–µ /etc/apache2/apache2.conf –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ /home/.acme –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—É—Ç–∏. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ /home —ç—Ç–æ –ø—É—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–æ–º–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å–µ—Ä–≤–µ—Ä–æ–≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.
cronjob /etc/cron.d/acme-sh –ø–∞–∫–µ—Ç–∞ Debian / Ubuntu –¥–ª—è acme.sh –æ–±–Ω–æ–≤–∏—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–ª—É–∂–±—É, –µ—Å–ª–∏ --reloadcmd –±—ã–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω.
